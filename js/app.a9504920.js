(function(e){function t(t){for(var n,s,c=t[0],i=t[1],l=t[2],d=0,p=[];d<c.length;d++)s=c[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&p.push(r[s][0]),r[s]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);u&&u(t);while(p.length)p.shift()();return a.push.apply(a,l||[]),o()}function o(){for(var e,t=0;t<a.length;t++){for(var o=a[t],n=!0,c=1;c<o.length;c++){var i=o[c];0!==r[i]&&(n=!1)}n&&(a.splice(t--,1),e=s(s.s=o[0]))}return e}var n={},r={app:0},a=[];function s(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=e,s.c=n,s.d=function(e,t,o){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(o,n,function(t){return e[t]}.bind(null,n));return o},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],i=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=i;a.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"039a":function(e,t,o){"use strict";var n=o("7174"),r=o.n(n);r.a},"56d7":function(e,t,o){"use strict";o.r(t);o("e260"),o("e6cf"),o("cca6"),o("a79d");var n=o("2b0e"),r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-app",[o("Login")],1)},a=[],s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("v-container",[o("v-row",[e.connected?e._e():o("v-col",{attrs:{cols:"12"}},[o("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[o("h1",[e._v("Prihlásenie")]),o("v-text-field",{attrs:{rules:[e.rules.required,e.rules.room],label:"Názov zboru",hint:"Slúži na identifikáciu zboru",filled:"",rounded:""},model:{value:e.roomName,callback:function(t){e.roomName=t},expression:"roomName"}}),o("v-text-field",{attrs:{filled:"",rounded:"","append-icon":e.show1?"mdi-eye":"mdi-eye-off",rules:[e.rules.required,e.rules.min],type:e.show1?"text":"password",label:"Prístupové heslo zboru",hint:"Slúži na vstup (pripojenie) do zboru"},on:{"click:append":function(t){e.show1=!e.show1}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),o("v-text-field",{attrs:{filled:"",rounded:"","append-icon":e.show2?"mdi-eye":"mdi-eye-off",rules:[e.rules.required],type:e.show2?"text":"password",inputmode:"numeric",label:"PIN",hint:"Slúži na vyhlásenie poplachu na diaľku"},on:{"click:append":function(t){e.show2=!e.show2}},model:{value:e.pin,callback:function(t){e.pin=t},expression:"pin"}}),o("v-btn",{attrs:{outlined:"",disabled:!e.valid},on:{click:function(t){return e.connect()}}},[e._v("Pripojiť")])],1)],1),e.connected?o("v-col",{attrs:{cols:"12"}},[o("v-toolbar-title",{staticStyle:{"margin-bottom":"16px"}},[o("v-icon",{attrs:{"x-small":"",color:"success"}},[e._v("mdi-checkbox-blank-circle")]),o("b",{staticStyle:{"margin-left":"6px"}},[e._v(e._s(e.roomName?e.roomName:"ws1.test"))]),o("v-btn",{staticStyle:{"margin-left":"8px"},attrs:{text:""},on:{click:function(t){return e.changeCredentials()}}},[e._v("Upraviť údaje")])],1),o("v-card",[o("v-card-title",{staticClass:"headline",staticStyle:{"font-weight":"500"}},[e._v(" Vyhlásenie poplachu "),o("br"),e._v("na diaľku ")]),o("v-card-text",[e._v(" Všetci pripojení členovia budú ihneď upozornení. Systém upozorní aj členov ktorý sa pripoja po vyhlásení poplachu. "),o("br"),e._v("Nižšie môžete pridať krátku správu. ")]),o("v-card-text",[o("v-textarea",{attrs:{outlined:"",label:"Správa"},model:{value:e.customMessage,callback:function(t){e.customMessage=t},expression:"customMessage"}})],1),o("v-card-actions",[o("v-progress-linear",{attrs:{rounded:"",color:"error",value:e.count}}),o("v-spacer"),o("v-btn",{staticStyle:{"margin-left":"8px"},attrs:{color:"error",text:""},on:{mousedown:e.start,mouseleave:e.stop,mouseup:e.stop,touchstart:e.start,touchend:e.stop,touchcancel:e.stop}},[e._v("Vyhlásiť")])],1)],1)],1):e._e()],1)],1),o("v-snackbar",{attrs:{timeout:e.timeout,"multi-line":"",top:""},scopedSlots:e._u([{key:"action",fn:function(){return[o("v-btn",{attrs:{text:""},on:{click:function(t){e.snackbar=!1}}},[e._v("Ok")])]},proxy:!0}]),model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.snackbarText)+" ")])],1)},c=[],i=(o("ac1f"),o("466d"),{name:"Login",data:function(){return{valid:!1,roomName:localStorage.getItem("roomName")||"",password:localStorage.getItem("password")||"",pin:localStorage.getItem("pin")||"",show1:!1,show2:!1,rules:{required:function(e){return!!e||"Povinné"},min:function(e){return e.length>=8||"Minimálne 8 znakov"},room:function(e){return/^\S*$/.test(e)||"Nesmmie obsahovať medzery"}},customMessage:"",socket:null,connected:!1,interval:!1,count:0,snackbar:!1,snackbarText:"",timeout:-1}},created:function(){this.connect()},methods:{connect:function(){var e=this;if(this.roomName&&this.password&&this.pin){localStorage.setItem("roomName",this.roomName),localStorage.setItem("password",this.password),localStorage.setItem("pin",this.pin),console.log("connecting");var t=this.roomName.match(/[^.]*/)[0];this.socket=new WebSocket("wss://api.".concat(t,".hasime.sk")),this.socket.onopen=function(){e.socket.send(JSON.stringify({action:"join",name:"ovládač_".concat(Math.floor(101*Math.random())),room:e.roomName,password:e.password,pin:e.pin,token:localStorage.getItem("token")})),e.connected=!0},this.socket.onmessage=function(t){var o=JSON.parse(t.data);switch(o.action){case"token":localStorage.setItem("token",o.token);break;case"alert":o.message===e.customMessage&&(e.snackbarText="Poplach bol úspešne vyhlásený. Odpájam sa...",setTimeout((function(){e.socket.close()}),5e3),e.snackbar=!0,e.customMessage="");break;case"ping":e.socket.send(JSON.stringify({action:"pong"}));break}},this.socket.onclose=function(){e.connected=!1,console.log("Socket is closed.")},this.socket.onerror=function(){e.connected=!1,e.socket.close(),setTimeout((function(){console.log("Trying to reconnect..."),e.socket.close(),e.connect()}),5e3)}}},start:function(){var e=this;this.interval||(this.interval=setInterval((function(){e.count+=10,110===e.count&&(console.log("confirmed"),e.remoteAlert(),e.count=0)}),250))},stop:function(){clearInterval(this.interval),this.interval=!1,this.count=0},remoteAlert:function(){this.connected&&this.socket.send(JSON.stringify({action:"remoteAlert",message:"".concat(this.customMessage),pin:this.pin}))},changeCredentials:function(){this.socket.close(),localStorage.removeItem("token")}}}),l=i,u=(o("039a"),o("2877")),d=o("6544"),p=o.n(d),f=o("8336"),m=o("b0af"),v=o("99d9"),h=o("62ad"),b=o("a523"),g=o("4bd4"),k=o("132d"),w=o("8e36"),y=o("0fd9"),x=o("2db4"),S=o("2fa4"),_=o("8654"),N=o("a844"),j=o("2a7f"),O=Object(u["a"])(l,s,c,!1,null,null,null),V=O.exports;p()(O,{VBtn:f["a"],VCard:m["a"],VCardActions:v["a"],VCardText:v["b"],VCardTitle:v["c"],VCol:h["a"],VContainer:b["a"],VForm:g["a"],VIcon:k["a"],VProgressLinear:w["a"],VRow:y["a"],VSnackbar:x["a"],VSpacer:S["a"],VTextField:_["a"],VTextarea:N["a"],VToolbarTitle:j["a"]});var T={name:"App",components:{Login:V},data:function(){return{}}},M=T,P=o("7496"),I=Object(u["a"])(M,r,a,!1,null,null,null),C=I.exports;p()(I,{VApp:P["a"]});var z=o("9483");Object(z["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var A=o("f309");n["a"].use(A["a"]);var J=new A["a"]({theme:{dark:!0}});n["a"].config.productionTip=!1,new n["a"]({vuetify:J,render:function(e){return e(C)}}).$mount("#app")},7174:function(e,t,o){}});
//# sourceMappingURL=app.a9504920.js.map